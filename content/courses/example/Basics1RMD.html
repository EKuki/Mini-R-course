---
date: "2019-05-05T00:00:00+01:00"
draft: false
linktitle: R and SNA
menu:
  example:
    name: 1. Basics
    weight: 2
summary: Basics in R adn RStudio
title: 1.Basics
type: docs
weight: 2
---



<p>Follow along with the <a href="https://github.com/EKuki/website/blob/master/content/courses/example/1.Basics_SNA%20using%20R_18March19.pptx">power point presentation</a> corresponding to this <code>1. Basic</code> section.</p>
<p><em><strong>Subsection 1.1</strong></em></p>
<p><a href="https://youtu.be/b7R8Q04jdrU">This video</a> provides an intro to R and RStudio that that I am skiping here, so if you are really new to R/RStudio, I would recommend you to watch it. In it, I go along this <code>1.1</code> subsection of <code>1. Basic</code>.</p>
<div id="how-to-comment-and-run-code" class="section level2">
<h2>How to comment and run code</h2>
<p>To write a comment, type <code>#</code> before the sentence you want to write.
Anything to the right of a <code>#</code> in a script will be ignored by R.</p>
<blockquote>
<p>To comment on a whole paragraph, select the lines you want to comment and press at the same time on your keyboard <code>Ctrl</code> + <code>Shift</code> + <code>c</code>.</p>
</blockquote>
<blockquote>
<p>To run: Click anywhere on the line you want to run and either 1) Click <code>Ctr</code> + <code>Enter</code> or 2) Click on <code>run</code> bottom (up right corner of Source/Script)</p>
</blockquote>
<blockquote>
<p>If you want to run several lines, highlight them all and do as explained above.</p>
</blockquote>
<p>You can get output in the Console simply by typing math in the script and running it:</p>
<pre class="r"><code>3 + 5 # Result is 8</code></pre>
<pre><code>## [1] 8</code></pre>
<pre class="r"><code>12/2 # Result is 6 </code></pre>
<pre><code>## [1] 6</code></pre>
</div>
<div id="assign-values-to-objects" class="section level2">
<h2>Assign values to objects</h2>
<p><code>&lt;-</code> assigns values on the right to objects on the left.
&gt; PC: Type <code>Alt</code> and <code>-</code> at the same time.
&gt; Mac: <code>Option</code> and <code>-</code></p>
<pre class="r"><code>weight_kg &lt;- 55    # doesn&#39;t print anything, but it has created an object. You can see it in the Environment window, in RStudio.
(weight_kg &lt;- 55)  # Putting parenthesis around the call prints the value of `weight_kg`</code></pre>
<pre><code>## [1] 55</code></pre>
<pre class="r"><code>weight_kg          # and so does typing (or &quot;calling&quot;) the name of the object</code></pre>
<pre><code>## [1] 55</code></pre>
<blockquote>
<p>Note that R iS cAsE SeNsItIvE!! Try typing <code>weight_KG</code>. You will see an error like this one <code>Error: object 'weight_KG' not found</code>. Note the capitalizatio of <code>_KG</code>.</p>
</blockquote>
<p>You can override an object. Be careful!</p>
<pre class="r"><code>weight_kg &lt;- 60 
weight_kg # If you call wight_kg you see that its value is now 60. You can also see this change in the Environment window.</code></pre>
<pre><code>## [1] 60</code></pre>
<p><strong>Exercise 1</strong>: Create an object (a vector) that is half the value of weight_kg (use weight_kg &lt;- 60) called “half_weight_kg”</p>
<pre class="r"><code>half_weight_kg &lt;- weight_kg / 2
half_weight_kg</code></pre>
<pre><code>## [1] 30</code></pre>
<p>You can give whichever name you want to an object, but it is a good idea to choose something that makes sense. For example:</p>
<pre class="r"><code>beautiful_day &lt;- weight_kg / 2
beautiful_day # A bit nonesense...</code></pre>
<pre><code>## [1] 30</code></pre>
<pre class="r"><code>half_weight_kg</code></pre>
<pre><code>## [1] 30</code></pre>
<blockquote>
<p>End of Exercise 1</p>
</blockquote>
<p><em><strong>Subsection 1.2</strong></em></p>
<p>In <a href="https://youtu.be/l7jsiDXV4yI">this video</a> I go along this <code>1.2</code> subsection of <code>1. Basic</code>.
Remember to follow with the power point corresponding to this <code>1. Basic</code> section!</p>
<p>To “concatenate” two vectors (aka, to put them together) we use <code>c()</code>:</p>
<pre class="r"><code>both_weights&lt;-c(weight_kg, half_weight_kg)
both_weights</code></pre>
<pre><code>## [1] 60 30</code></pre>
<p>Another example:</p>
<pre class="r"><code>mum &lt;- &quot;Claire&quot;
dad&lt;- &quot;Pablo&quot;
parents &lt;- c(mum, dad)</code></pre>
<p><strong>Exercise 2</strong>: Create a vector called “daughter” with a female’s name and another one called “dog” with a dog’s name.</p>
<pre class="r"><code>daughter &lt;- &quot;Anita&quot;
dog &lt;- &quot;Poppy&quot;</code></pre>
<p>Create a new vector called “family” with the names of all family members (use this order mum, dad, daugther, dog).
&gt; With R, we usually can get to the same outcome coding in different ways. My solution is usually one of many.</p>
<pre class="r"><code>family &lt;- c(parents, daughter, dog)
family</code></pre>
<pre><code>## [1] &quot;Claire&quot; &quot;Pablo&quot;  &quot;Anita&quot;  &quot;Poppy&quot;</code></pre>
<pre class="r"><code>class(family)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>c(mum, dad, daughter, dog)</code></pre>
<pre><code>## [1] &quot;Claire&quot; &quot;Pablo&quot;  &quot;Anita&quot;  &quot;Poppy&quot;</code></pre>
<pre class="r"><code>family_char &lt;- c(&quot;Claire&quot;, &quot;Pablo&quot; , &quot;Anita&quot;,  &quot;Poppy&quot;)
class(family_char)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<blockquote>
<p>End Exercise 2</p>
</blockquote>
</div>
<div id="a.vectors" class="section level2">
<h2>a.Vectors</h2>
<pre class="r"><code>a &lt;- c(1,2,5.3,6,-2,4) # numeric vector
b &lt;- c(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;) # character vector
ce &lt;- c(TRUE,TRUE,TRUE,FALSE,TRUE,FALSE) #logical vector</code></pre>
<div id="indexing-a-vector" class="section level3">
<h3>Indexing a <code>vector</code></h3>
<pre class="r"><code>ce[2] # Extract second element of `ce`</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>a[3] # Extract third element of a</code></pre>
<pre><code>## [1] 5.3</code></pre>
<pre class="r"><code>a[1:3] # Extrat all elements between the first and the third elements, of `a`</code></pre>
<pre><code>## [1] 1.0 2.0 5.3</code></pre>
<pre class="r"><code>b[c(1,3)] # Extract first and third element of `b`</code></pre>
<pre><code>## [1] &quot;one&quot;   &quot;three&quot;</code></pre>
<blockquote>
<p>Note that I did not use the letter <code>c</code> to name my vector: I used <code>ce</code> instead. The choice of c as the name of a vector is a pretty bad one, as there is a command/function called <code>c()</code>! See <code>?c</code> or <code>help(c)</code></p>
</blockquote>
<p><strong>Exercise 3</strong>: Extract the first element of the vector family: the <code>mum</code>.</p>
<pre class="r"><code>family[1]</code></pre>
<pre><code>## [1] &quot;Claire&quot;</code></pre>
<p>Extract the forth element of the vector family: the <code>dog</code>.</p>
<pre class="r"><code>family[4]</code></pre>
<pre><code>## [1] &quot;Poppy&quot;</code></pre>
<p>Extract both the name of the <code>dad</code> and the <code>daughter</code> (do it at the same time -using only one command-, if possible).</p>
<pre class="r"><code>family[c(2,3)]</code></pre>
<pre><code>## [1] &quot;Pablo&quot; &quot;Anita&quot;</code></pre>
<blockquote>
<p>End of Exercise 3</p>
</blockquote>
</div>
</div>
<div id="b.data-frames" class="section level2">
<h2>b.Data frames</h2>
<pre class="r"><code>Identification &lt;- c(1,2,3,4)
Colors &lt;- c(&quot;red&quot;, &quot;white&quot;, &quot;red&quot;, NA) # Note NA
Succeeded &lt;- c(TRUE,TRUE,TRUE,FALSE)
mydata &lt;- data.frame(Identification, Colors, Succeeded) # Join those vectors together to create a `data.frame`
mydata</code></pre>
<pre><code>##   Identification Colors Succeeded
## 1              1    red      TRUE
## 2              2  white      TRUE
## 3              3    red      TRUE
## 4              4   &lt;NA&gt;     FALSE</code></pre>
<pre class="r"><code>names(mydata) &lt;- c(&quot;ID&quot;,&quot;Color&quot;,&quot;Passed&quot;) # Change the variable/column names</code></pre>
<div id="indexing-a-data.frame" class="section level3">
<h3>Indexing a <code>data.frame</code></h3>
<pre class="r"><code>mydata[ ,c(1:2)] # columns 1 and 2 of `mydata` data frame. All rows</code></pre>
<pre><code>##   ID Color
## 1  1   red
## 2  2 white
## 3  3   red
## 4  4  &lt;NA&gt;</code></pre>
<p>Other ways to identify observations in a <code>data.frame</code>.</p>
<pre class="r"><code>mydata[,c(&quot;ID&quot;,&quot;Color&quot;)] # columns ID and Color from `mydata`</code></pre>
<pre><code>##   ID Color
## 1  1   red
## 2  2 white
## 3  3   red
## 4  4  &lt;NA&gt;</code></pre>
<pre class="r"><code>mydata$Passed # variable ID in the data frame</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE</code></pre>
<blockquote>
<p>The $ operator is used constantly. It retrieves/extracts a variable in a dataset.</p>
</blockquote>
<p><strong>Exercise 4</strong>: Create a data frame called <code>family_df</code> with two columns: <code>name</code> and <code>age</code>. For column <code>name</code>, use the previous <code>family</code> vector. For column <code>age</code>, make up ages for our family</p>
<pre class="r"><code>family</code></pre>
<pre><code>## [1] &quot;Claire&quot; &quot;Pablo&quot;  &quot;Anita&quot;  &quot;Poppy&quot;</code></pre>
<pre class="r"><code>age &lt;- c(45, 48, 10, 7)
family_df &lt;- data.frame(family, age)
family_df</code></pre>
<pre><code>##   family age
## 1 Claire  45
## 2  Pablo  48
## 3  Anita  10
## 4  Poppy   7</code></pre>
<pre class="r"><code>names(family_df) &lt;- c(&quot;name&quot;,&quot;age&quot;) # variable names 
family_df</code></pre>
<pre><code>##     name age
## 1 Claire  45
## 2  Pablo  48
## 3  Anita  10
## 4  Poppy   7</code></pre>
<blockquote>
<p>End of Exercise 4</p>
</blockquote>
</div>
</div>
<div id="c.matrices" class="section level2">
<h2>c.Matrices</h2>
<pre class="r"><code>nb_matrix&lt;-matrix(data = 1:20, nrow=5,ncol=4) # The function `matrix()` generates 5 x 4 numeric matrix called `nb_matrix`
nb_matrix</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    6   11   16
## [2,]    2    7   12   17
## [3,]    3    8   13   18
## [4,]    4    9   14   19
## [5,]    5   10   15   20</code></pre>
<pre class="r"><code>help(matrix) # look for help of the function `matrix()`</code></pre>
<pre><code>## starting httpd help server ... done</code></pre>
<pre class="r"><code>?matrix
??matrix
?graph_from_data_frame</code></pre>
<pre><code>## No documentation for &#39;graph_from_data_frame&#39; in specified packages and libraries:
## you could try &#39;??graph_from_data_frame&#39;</code></pre>
<pre class="r"><code>??graph_from_data_frame</code></pre>
<p>Another example</p>
<pre class="r"><code>cells &lt;- c(1,26,24,68)
mymatrix &lt;- matrix(data = cells, nrow=2, ncol=2, byrow=TRUE)
mymatrix</code></pre>
<pre><code>##      [,1] [,2]
## [1,]    1   26
## [2,]   24   68</code></pre>
<div id="indexing-a-matrix-as-we-did-with-data.frames" class="section level3">
<h3>Indexing a <code>matrix</code> (as we did with <code>data.frames</code>)</h3>
<pre class="r"><code>nb_matrix[,4] # 4th column of nb_matrix</code></pre>
<pre><code>## [1] 16 17 18 19 20</code></pre>
<p><strong>Exercise 5</strong>: Extract the 3rd row of <code>nb_matrix</code></p>
<pre class="r"><code>nb_matrix[3,]</code></pre>
<pre><code>## [1]  3  8 13 18</code></pre>
<p>Extract rows 2,3,4 of columns 1,2,3 of <code>nb_matrix</code></p>
<pre class="r"><code>nb_matrix[2:4,1:3]</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2    7   12
## [2,]    3    8   13
## [3,]    4    9   14</code></pre>
<pre class="r"><code>nb_matrix[c(2,3,4), c(1,2,3)]</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2    7   12
## [2,]    3    8   13
## [3,]    4    9   14</code></pre>
<blockquote>
<p>End of Exercise 5</p>
</blockquote>
<p><em><strong>Subsection 1.3</strong></em></p>
<p>In <a href="https://youtu.be/bxCB1xXBYcA">this video</a> I go along this <code>1.3</code> subsection of <code>1. Basic</code>.
Remember to follow with the power point corresponding to this <code>1. Basic</code> section!</p>
</div>
</div>
<div id="d.lists" class="section level2">
<h2>d.Lists</h2>
<p>This is an example of a list with 4 components: a string, a numeric vector, a matrix, and a scalar :</p>
<pre class="r"><code>mylist &lt;- list(name=c(&quot;Fred&quot;, &quot;Lola&quot;), mynumbers=a, mymatrix=nb_matrix, age=6.8)
mylist</code></pre>
<pre><code>## $name
## [1] &quot;Fred&quot; &quot;Lola&quot;
## 
## $mynumbers
## [1]  1.0  2.0  5.3  6.0 -2.0  4.0
## 
## $mymatrix
##      [,1] [,2] [,3] [,4]
## [1,]    1    6   11   16
## [2,]    2    7   12   17
## [3,]    3    8   13   18
## [4,]    4    9   14   19
## [5,]    5   10   15   20
## 
## $age
## [1] 6.8</code></pre>
<div id="indexing-a-list" class="section level3">
<h3>Indexing a list</h3>
<pre class="r"><code>mylist[[2]] # 2nd component of the list</code></pre>
<pre><code>## [1]  1.0  2.0  5.3  6.0 -2.0  4.0</code></pre>
<pre class="r"><code>mylist[[2]][3] # Extract the third element of the 2nd component of the list</code></pre>
<pre><code>## [1] 5.3</code></pre>
<p>Other ways to identify observations in a list</p>
<pre class="r"><code>mylist[[&quot;mynumbers&quot;]] # component named mynumbers in mylist</code></pre>
<pre><code>## [1]  1.0  2.0  5.3  6.0 -2.0  4.0</code></pre>
<pre class="r"><code>mylist[[&quot;mynumbers&quot;]][3]</code></pre>
<pre><code>## [1] 5.3</code></pre>
</div>
</div>
<div id="e.factors" class="section level2">
<h2>e.Factors:</h2>
<p>R treats factors as INTEGER vectors, where each integer corresponds to a category, or a level.
As an example, let’s create the variable gender with 20 “male” entries and 30 “female” entries:</p>
<pre class="r"><code>gender &lt;- c(rep(&quot;male&quot;,20), rep(&quot;female&quot;, 30)) 
gender</code></pre>
<pre><code>##  [1] &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;  
##  [8] &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;  
## [15] &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;male&quot;   &quot;female&quot;
## [22] &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot;
## [29] &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot;
## [36] &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot;
## [43] &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot; &quot;female&quot;
## [50] &quot;female&quot;</code></pre>
<pre class="r"><code>class(gender) # `class()` is a function. It tells us what type of data we are dealing with</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>class(mylist)</code></pre>
<pre><code>## [1] &quot;list&quot;</code></pre>
<pre class="r"><code>gender &lt;- factor(gender) 
gender</code></pre>
<pre><code>##  [1] male   male   male   male   male   male   male   male   male   male  
## [11] male   male   male   male   male   male   male   male   male   male  
## [21] female female female female female female female female female female
## [31] female female female female female female female female female female
## [41] female female female female female female female female female female
## Levels: female male</code></pre>
<pre class="r"><code>class(gender)</code></pre>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<pre class="r"><code>levels(gender) # R sorts levels alphabetically</code></pre>
<pre><code>## [1] &quot;female&quot; &quot;male&quot;</code></pre>
<p>We can change the order of the levels of a factor by:</p>
<pre class="r"><code>gender2 &lt;- factor(gender, levels = c(&quot;male&quot;, &quot;female&quot;))
levels(gender2)</code></pre>
<pre><code>## [1] &quot;male&quot;   &quot;female&quot;</code></pre>
<p>We can also change the levels names by renaming the factor labels:</p>
<pre class="r"><code>gender3 &lt;-factor(gender, labels = c(&quot;red&quot;, &quot;yellow&quot;))
levels(gender3)</code></pre>
<pre><code>## [1] &quot;red&quot;    &quot;yellow&quot;</code></pre>
<blockquote>
<p>Note that it is very important to maintain the same order as the order of the factor levels! To avoid confusion, you can change the order of the levels AND the names of the labels at the same time:</p>
</blockquote>
<pre class="r"><code>gender4 &lt;- factor(gender,
                  levels = c(&quot;male&quot;, &quot;female&quot;), # make male the first level
                  labels = c(&quot;hombre&quot;, &quot;mujer&quot;)) # change label male by label hombre

str(gender) # STRUCTURE. original</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;female&quot;,&quot;male&quot;: 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
<pre class="r"><code>str(gender2) # we changed the order of the levels</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;male&quot;,&quot;female&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<pre class="r"><code>str(gender3) # we changed the label of the levels</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;red&quot;,&quot;yellow&quot;: 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
<pre class="r"><code>str(gender4) # we changed both the order and the labels of the levels</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;hombre&quot;,&quot;mujer&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<pre class="r"><code># R now treats gender as a nominal variable 
summary(gender)</code></pre>
<pre><code>## female   male 
##     30     20</code></pre>
<p>If we want an ordinal variable, we need to add the argument <code>ordered = TRUE</code>:</p>
<pre class="r"><code>quality_product &lt;- c(&quot;G&quot;, &quot;B&quot;, &quot;Avg&quot;, &quot;Avg&quot;, &quot;Avg&quot;, &quot;G&quot;, &quot;B&quot;, &quot;G&quot;, &quot;G&quot;, &quot;G&quot;) # G = good, Avg = average, B = bad
quality_product_f &lt;- factor(quality_product, ordered = TRUE,
                            levels = c(&quot;B&quot;, &quot;Avg&quot;, &quot;G&quot;)) # Tell R that this is an ordered vector
quality_product_f # Note that B &lt; Avg &lt; G</code></pre>
<pre><code>##  [1] G   B   Avg Avg Avg G   B   G   G   G  
## Levels: B &lt; Avg &lt; G</code></pre>
<pre class="r"><code>str(quality_product_f)</code></pre>
<pre><code>##  Ord.factor w/ 3 levels &quot;B&quot;&lt;&quot;Avg&quot;&lt;&quot;G&quot;: 3 1 2 2 2 3 1 3 3 3</code></pre>
</div>
<div id="f.functions" class="section level2">
<h2>f.Functions</h2>
<pre class="r"><code>family_df</code></pre>
<pre><code>##     name age
## 1 Claire  45
## 2  Pablo  48
## 3  Anita  10
## 4  Poppy   7</code></pre>
<pre class="r"><code>str(family_df) # structure</code></pre>
<pre><code>## &#39;data.frame&#39;:    4 obs. of  2 variables:
##  $ name: Factor w/ 4 levels &quot;Anita&quot;,&quot;Claire&quot;,..: 2 3 1 4
##  $ age : num  45 48 10 7</code></pre>
<pre class="r"><code>      # Wait a second... Why is family a Factor?!
      # ?data.frame</code></pre>
<p>Now, run and think a bit about these lines of code:</p>
<pre class="r"><code>head(family_df, 2) # First 2 rows, all columns</code></pre>
<pre><code>##     name age
## 1 Claire  45
## 2  Pablo  48</code></pre>
<pre class="r"><code>head(family_df) # By default, head() gives you the first 6 rows, all columns. Our dataset only has 4 rows!</code></pre>
<pre><code>##     name age
## 1 Claire  45
## 2  Pablo  48
## 3  Anita  10
## 4  Poppy   7</code></pre>
<pre class="r"><code>summary(family_df)</code></pre>
<pre><code>##      name        age       
##  Anita :1   Min.   : 7.00  
##  Claire:1   1st Qu.: 9.25  
##  Pablo :1   Median :27.50  
##  Poppy :1   Mean   :27.50  
##             3rd Qu.:45.75  
##             Max.   :48.00</code></pre>
<pre class="r"><code>dim(family_df) # dimensions. Rows and columns</code></pre>
<pre><code>## [1] 4 2</code></pre>
<p>Try running <code>mean(family_df)</code>. It doesn’t work! I need to specify a column to display!</p>
<pre class="r"><code>mean(family_df$age)</code></pre>
<pre><code>## [1] 27.5</code></pre>
<pre class="r"><code>sum(family_df$age)</code></pre>
<pre><code>## [1] 110</code></pre>
<p>Why <em>does</em> this one work?</p>
<pre class="r"><code>mean(age)</code></pre>
<pre><code>## [1] 27.5</code></pre>
<p>Some more functions:</p>
<pre class="r"><code>heights &lt;- c(2, 4, 4, NA, 6)
str(heights)</code></pre>
<pre><code>##  num [1:5] 2 4 4 NA 6</code></pre>
<pre class="r"><code>summary(heights)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##     2.0     3.5     4.0     4.0     4.5     6.0       1</code></pre>
<pre class="r"><code>mean(heights) # ??</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>max(heights) # ??</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>mean(heights, na.rm = TRUE) # Remove NA for this arithmetic operation</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>max(heights, na.rm = TRUE)</code></pre>
<pre><code>## [1] 6</code></pre>
<div id="do-we-have-missing-values" class="section level3">
<h3>Do we have missing values?</h3>
<pre class="r"><code>is.na(heights)</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code>summary(is.na(heights))</code></pre>
<pre><code>##    Mode   FALSE    TRUE 
## logical       4       1</code></pre>
<p>Identify location of NAs in vector</p>
<pre class="r"><code>which(is.na(heights)) # Index, or location, 4 has an NA</code></pre>
<pre><code>## [1] 4</code></pre>
<p>Identify count of NAs in data frame</p>
<pre class="r"><code>sum(is.na(heights)) # We only have one NA</code></pre>
<pre><code>## [1] 1</code></pre>
<p>Extract those elements which are not missing values.</p>
<pre class="r"><code>!is.na(heights)  # The operator `!` in R means NO. Thus, !is.na = those that are NOT missing values. Returns logical vector</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
<pre class="r"><code>heights[!is.na(heights)] # Extract all values from heights that are not missing values</code></pre>
<pre><code>## [1] 2 4 4 6</code></pre>
<pre class="r"><code>heights[c(1,2,3,5)]</code></pre>
<pre><code>## [1] 2 4 4 6</code></pre>
<p>Extract those elements which are complete cases (case=row).</p>
<pre class="r"><code>complete.cases(heights) # returns a logical vector indicating which cases are complete. </code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
<pre class="r"><code>heights[complete.cases(heights)]</code></pre>
<pre><code>## [1] 2 4 4 6</code></pre>
<pre class="r"><code>!complete.cases(heights) # You can also subset with the `!` operator to get incomplete cases.</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
<pre class="r"><code>heights[!complete.cases(heights)]</code></pre>
<pre><code>## [1] NA</code></pre>
<p><strong>Exercise 6</strong>: Create another column for family_df called profession where you give a profession to each family member, except to the dog.
&gt; Tip: <em>assign</em> a new <em>column</em></p>
<pre class="r"><code>family_df$profession &lt;- c(&quot;researcher&quot;, &quot;IT&quot;, &quot;student&quot;, NA)</code></pre>
<p>Retrieve all cases in family_df that don’t have NAs.</p>
<pre class="r"><code>family_df[complete.cases(family_df), ]</code></pre>
<pre><code>##     name age profession
## 1 Claire  45 researcher
## 2  Pablo  48         IT
## 3  Anita  10    student</code></pre>
<blockquote>
<p>End of Exercise 6</p>
</blockquote>
<p>Now, run and think a bit about these lines of code:</p>
<pre class="r"><code>is.na(family_df)</code></pre>
<pre><code>##       name   age profession
## [1,] FALSE FALSE      FALSE
## [2,] FALSE FALSE      FALSE
## [3,] FALSE FALSE      FALSE
## [4,] FALSE FALSE       TRUE</code></pre>
<pre class="r"><code>is.na(family_df$name)</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE</code></pre>
<pre class="r"><code>is.na(family_df$profession)</code></pre>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<pre class="r"><code>colSums(is.na(family_df)) # Compute the total missing values in each colum</code></pre>
<pre><code>##       name        age profession 
##          0          0          1</code></pre>
<p>Another example. Recode missing values with the mean:</p>
<pre class="r"><code>        x &lt;- c(1:4, NA, 6:7, NA) # vector with missing data
        x</code></pre>
<pre><code>## [1]  1  2  3  4 NA  6  7 NA</code></pre>
<pre class="r"><code>        is.na(x) # Does x have NAs? Yes</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<pre class="r"><code>        which(is.na(x)) # NAs are in positions 5 and 8</code></pre>
<pre><code>## [1] 5 8</code></pre>
<pre class="r"><code>        mean(x) # It doesn&#39;t work, why?</code></pre>
<pre><code>## [1] NA</code></pre>
<pre class="r"><code>        mean(x, na.rm = TRUE) # Mean of x, without the NAs</code></pre>
<pre><code>## [1] 3.833333</code></pre>
<pre class="r"><code>        x[is.na(x)] # Extract positions 5 and 8 (the TRUE ones) of x</code></pre>
<pre><code>## [1] NA NA</code></pre>
<pre class="r"><code>        x[is.na(x)] &lt;- mean(x, na.rm = TRUE) # *assign* `&lt;-` the mean of x to the cells where we have NA values in x
        round(x, 1) # Round the values of x and give me only 1 decimal point</code></pre>
<pre><code>## [1] 1.0 2.0 3.0 4.0 3.8 6.0 7.0 3.8</code></pre>
<pre class="r"><code>        x # x still has a lot of decimal points. Why?</code></pre>
<pre><code>## [1] 1.000000 2.000000 3.000000 4.000000 3.833333 6.000000 7.000000 3.833333</code></pre>
<blockquote>
<p>Note that some people code NA as 99. If you feed these type of data to R, R won’t know those are NAs.</p>
</blockquote>
<p>Example of a data frame that codes missing values as 99</p>
<pre class="r"><code>df &lt;- data.frame(col1 = c(1:3, 99), col2 = c(2.5, 4.2, 99, 3.2))
df</code></pre>
<pre><code>##   col1 col2
## 1    1  2.5
## 2    2  4.2
## 3    3 99.0
## 4   99  3.2</code></pre>
<p>Change 99s to NAs</p>
<pre class="r"><code>df[df == 99] &lt;- NA # in the locations that df== 99, insert an NA
df</code></pre>
<pre><code>##   col1 col2
## 1    1  2.5
## 2    2  4.2
## 3    3   NA
## 4   NA  3.2</code></pre>
<p><strong>Exercise 7</strong>: Create another column for family_df called salary where you give a salary to each family member, except to the dog.</p>
<pre class="r"><code>family_df$salary &lt;- c(1500, 1350, 23, NA)</code></pre>
<p>This family loves their dog and they dedicate 1% of their overall mean salary to him. Recode the salary missing value of the dog with 0.01 of the mean of the family’s salary.</p>
<pre class="r"><code>family_df$salary[is.na(family_df$salary)] &lt;- mean(family_df$salary, na.rm = TRUE) * 0.01
family_df</code></pre>
<pre><code>##     name age profession      salary
## 1 Claire  45 researcher 1500.000000
## 2  Pablo  48         IT 1350.000000
## 3  Anita  10    student   23.000000
## 4  Poppy   7       &lt;NA&gt;    9.576667</code></pre>
<p>Get incomplete cases with the <code>!</code> operator</p>
<pre class="r"><code>family_df[!complete.cases(family_df),]</code></pre>
<pre><code>##    name age profession   salary
## 4 Poppy   7       &lt;NA&gt; 9.576667</code></pre>
<blockquote>
<p>End of Exercise 7</p>
</blockquote>
<p>There are some other ocasions when R will return NA (or error, or warning):
Run these and see what happens
<code>var (8)</code> # Variance of one number
<code>as.numeric (c("1", "2", "three", "4"))</code> # Illegal conversion
<code>c(1, 2, 3)[4]</code> # Vector subscript out of range<br />
<code>NA - 1</code> # Most operations on NAs produce NAs
<code>a &lt;- data.frame (a = 1:3, b = 2:4)</code>
<code>a[4,]</code> # Data frame row subscript out of range. # The first NA in the output is the row number
<code>a[,4]</code> # Specifying a non-existent column just produces an error</p>
</div>
</div>
